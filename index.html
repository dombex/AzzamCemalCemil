<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Azzam Cemal-Cemil | Katalog Online</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* PONDASI DASAR & BACKGROUND */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; -webkit-tap-highlight-color: transparent; }
        
        body { 
            background-image: url('background.jpg'); 
            background-size: cover; 
            background-attachment: fixed; 
            background-position: center;
            background-color: #f8f9fa; 
            color: #333; 
            padding-bottom: 140px; 
        }

        /* Overlay halus agar konten tetap terbaca (Efek Glassmorphism) */
        body::before {
            content: "";
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 255, 255, 0.65); 
            z-index: -1;
        }

        .datetime-container { background: #2D5A27; color: white; padding: 10px 0; text-align: center; font-size: 11px; font-weight: 600; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        
        /* NAVBAR */
        .navbar { display: flex; justify-content: space-between; align-items: center; padding: 15px 5%; background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(10px); position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 15px rgba(0,0,0,0.05); }
        .nav-logo { width: 38px; height: 38px; border-radius: 50%; border: 2px solid #FF5733; object-fit: cover; }
        .logo { font-size: 18px; font-weight: 700; color: #2D5A27; }
        .logo span { color: #FF5733; }
        
        /* HERO SECTION */
        .hero { padding: 30px 5% 15px; text-align: center; }
        .main-logo-container { width: 110px; height: 110px; margin: 0 auto 15px; border-radius: 50%; border: 4px solid #fff; overflow: hidden; box-shadow: 0 10px 25px rgba(0,0,0,0.15); }
        .main-logo-container img { width: 100%; height: 100%; object-fit: cover; }
        .hero h1 { font-size: 24px; line-height: 1.2; color: #222; text-shadow: 0 2px 4px rgba(255,255,255,0.5); }
        .hero h1 span { color: #FF5733; }
        .hero-desc { font-size: 13px; color: #444; margin-top: 10px; padding: 0 8%; line-height: 1.6; font-weight: 600; }
        
        /* INFO STATUS */
        .info-section { padding: 0 5% 20px; text-align: center; }
        .status-badge { display: inline-block; padding: 6px 18px; border-radius: 50px; font-size: 10px; font-weight: 700; margin-bottom: 5px; text-transform: uppercase; }
        .status-open { background: #e8f5e9; color: #2D5A27; border: 1px solid #2D5A27; }
        .status-closed { background: #ffebee; color: #c62828; border: 1px solid #c62828; }
        
        /* TAB FILTER */
        .filter-tabs { display: flex; gap: 10px; overflow-x: auto; padding: 15px 5%; scrollbar-width: none; }
        .filter-tabs::-webkit-scrollbar { display: none; }
        .tab-btn { padding: 10px 20px; border: none; background: white; color: #777; border-radius: 12px; font-size: 12px; font-weight: 600; white-space: nowrap; box-shadow: 0 4px 12px rgba(0,0,0,0.1); cursor: pointer; transition: 0.3s; }
        .tab-btn.active { background: #FF5733; color: #fff; transform: translateY(-2px); }
        
        /* MENU GRID */
        .menu-container { padding: 0 4%; min-height: 300px; }
        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .menu-card { background: rgba(255, 255, 255, 0.9); border-radius: 20px; padding: 10px; display: flex; flex-direction: column; box-shadow: 0 5px 15px rgba(0,0,0,0.08); position: relative; backdrop-filter: blur(5px); border: 1px solid rgba(255,255,255,0.3); transition: 0.3s; }
        
        .img-box { width: 100%; height: 130px; border-radius: 15px; overflow: hidden; margin-bottom: 10px; cursor: zoom-in; position: relative; }
        .img-box img { width: 100%; height: 100%; object-fit: cover; transition: 0.5s; }
        .menu-card:hover .img-box img { transform: scale(1.1); }
        
        .promo-tag { position: absolute; top: 8px; left: 8px; background: #FF5733; color: white; padding: 3px 10px; border-radius: 50px; font-size: 9px; font-weight: 700; z-index: 10; box-shadow: 0 3px 8px rgba(0,0,0,0.2); }
        .zoom-icon { position: absolute; bottom: 8px; right: 8px; background: rgba(0,0,0,0.4); color: white; padding: 3px 6px; border-radius: 4px; font-size: 9px; }
        
        .menu-card h3 { font-size: 13px; font-weight: 700; color: #333; margin-bottom: 2px; height: 38px; overflow: hidden; }
        .price-tag { font-size: 14px; font-weight: 700; color: #FF5733; margin-bottom: 8px; }
        
        .lbl-tersedia { font-size: 9px; font-weight: 700; color: #2D5A27; background: #e8f5e9; padding: 4px; text-align: center; border-radius: 6px; margin-bottom: 10px; }
        .lbl-habis { font-size: 9px; font-weight: 700; color: #c62828; background: #ffebee; padding: 4px; text-align: center; border-radius: 6px; margin-bottom: 10px; }
        
        .add-btn { padding: 10px; background: #FF5733; color: white; border: none; border-radius: 10px; font-weight: 700; font-size: 11px; cursor: pointer; transition: 0.3s; }
        .add-btn.selected { background: #2D5A27; }
        .add-btn:disabled { background: #ccc; cursor: not-allowed; }
        
        /* LIGHTBOX */
        .lightbox { display: none; position: fixed; z-index: 9999; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); align-items: center; justify-content: center; cursor: zoom-out; }
        .lightbox img { max-width: 90%; max-height: 80%; border-radius: 10px; }
        .lightbox.active { display: flex; }
        
        /* FOOTER & DISCLAIMER */
        .disclaimer-container { padding: 30px 5% 10px; }
        .disclaimer-box { background: rgba(255, 249, 240, 0.9); border-left: 4px solid #FF5733; padding: 15px; border-radius: 12px; backdrop-filter: blur(5px); }
        .disclaimer-box h4 { font-size: 13px; color: #FF5733; margin-bottom: 8px; font-weight: 700; }
        .disclaimer-box p { font-size: 11px; color: #666; line-height: 1.6; }

        .social-footer { padding: 20px 5% 40px; text-align: center; }
        .social-icons { display: flex; justify-content: center; gap: 20px; margin-top: 15px; }
        .social-link { text-decoration: none; width: 45px; height: 45px; display: flex; align-items: center; justify-content: center; border-radius: 50%; font-size: 20px; color: white; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .instagram { background: linear-gradient(45deg, #f09433, #bc1888); }
        .facebook { background: #1877F2; }
        
        /* CART BAR */
        .cart-bar { position: fixed; bottom: 20px; left: 5%; width: 90%; background: #2D5A27; padding: 15px; border-radius: 15px; display: none; justify-content: space-between; align-items: center; box-shadow: 0 10px 30px rgba(0,0,0,0.4); z-index: 2000; border: 1px solid rgba(255,255,255,0.2); }
        .checkout-btn { background: white; color: #2D5A27; padding: 10px 20px; border-radius: 8px; border: none; font-weight: 800; font-size: 12px; cursor: pointer; }

        @media (min-width: 600px) { .menu-grid { grid-template-columns: repeat(4, 1fr); } }
    </style>
</head>
<body>

    <div class="lightbox" id="lightbox" onclick="this.classList.remove('active')">
        <img id="lightbox-img" src="">
    </div>

    <div class="datetime-container" id="real-datetime">Memuat Waktu...</div>
    
    <nav class="navbar">
        <div class="brand" style="display: flex; align-items: center; gap: 10px;">
            <img src="Logo.jpg" class="nav-logo" onerror="this.src='https://via.placeholder.com/50'">
            <div class="logo">Azzam<span>CemalCemil</span></div>
        </div>
    </nav>

    <section class="hero">
        <div class="main-logo-container">
            <img src="Logo.jpg" onerror="this.src='https://via.placeholder.com/150'">
        </div>
        <h1>Cita Rasa Rumahan,<br><span>Bikin Nagih Tiap Gigitan!</span> ü§§</h1>
        <p class="hero-desc">Sajian sepenuh hati untuk harimu yang istimewa.</p>
    </section>

    <div class="info-section">
        <div id="shop-status-badge" class="status-badge">Menghitung...</div>
        <p style="font-size: 11px; color: #555; font-weight: 600;">Jam Operasional: 08:00 - 20:00 WIB</p>
    </div>

    <div class="filter-tabs">
        <button class="tab-btn active" onclick="filterMenu('semua', this)">Semua</button>
        <button class="tab-btn" onclick="filterMenu('makanan', this)">Makan Berat</button>
        <button class="tab-btn" onclick="filterMenu('jajanan', this)">Cemilan Hits</button>
        <button class="tab-btn" onclick="filterMenu('kue', this)">Kue & Manis</button>
        <button class="tab-btn" onclick="filterMenu('lainnya', this)">üì¶ Lain-lain</button>
    </div>

    <div class="menu-container">
        <div id="loading-text" style="text-align: center; color: #555; padding: 40px; font-weight: bold;">
            <i class="fas fa-spinner fa-spin"></i> Menyiapkan Menu Lezat...
        </div>
        <div class="menu-grid" id="menu-list"></div>
    </div>

    <div class="disclaimer-container">
        <div class="disclaimer-box">
            <h4>‚ö†Ô∏è Catatan Pesanan:</h4>
            <p>‚Ä¢ Selain pelanggan tetap, <b>wajib transfer dahulu</b> sebelum diproses.</p>
            <p>‚Ä¢ Waktu COD/Antar dikonfirmasi via WA (Jam menyesuaikan).</p>
            <p>‚Ä¢ Menu tidak selalu tersedia setiap hari. Mohon <b>cek status</b> di atas.</p>
        </div>
    </div>

    <footer class="social-footer">
        <p style="font-style: italic; font-size: 12px; color: #333; margin-bottom: 10px; font-weight: 600;">"Kebahagiaan dimulai dari perut yang terisi." ‚ú®</p>
        <div class="social-icons">
            <a href="https://www.instagram.com/undaazzam_2813" target="_blank" class="social-link instagram"><i class="fab fa-instagram"></i></a>
            <a href="https://m.facebook.com/unda.azzam/" target="_blank" class="social-link facebook"><i class="fab fa-facebook-f"></i></a>
        </div>
        <p style="margin-top: 15px; font-size: 10px; color: #777;">&copy; 2026 Azzam Cemal-Cemil. Made with ‚ù§Ô∏è</p>
    </footer>

    <div class="cart-bar" id="cart-bar">
        <div>
            <h4 id="cart-count" style="color:white; margin:0; font-size: 12px;">0 Menu</h4>
            <div id="cart-total" style="color:white; font-weight:bold; font-size: 14px;">Total: Rp 0</div>
        </div>
        <button class="checkout-btn" onclick="checkoutWA()">Pesan Sekarang</button>
    </div>

    <script>
        const noWA = "6289646934438"; 
        const sheetDB_URL = "https://sheetdb.io/api/v1/bmhy1qdhw6kh1"; 

        let menuData = [];
        let cart = [];

        // AMBIL DATA DARI GOOGLE SHEETS
        async function fetchMenu() {
            try {
                const response = await fetch(sheetDB_URL);
                menuData = await response.json();
                document.getElementById('loading-text').style.display = 'none';
                render();
            } catch (error) { 
                document.getElementById('loading-text').innerText = "Gagal memuat data. Periksa koneksi!"; 
            }
        }

        function formatRupiah(angka) {
            return "Rp " + parseInt(angka || 0).toLocaleString('id-ID');
        }

        function zoomImg(src) {
            const lb = document.getElementById('lightbox');
            document.getElementById('lightbox-img').src = src;
            lb.classList.add('active');
        }

        // TAMPILKAN MENU KE LAYAR
        function render(f = 'semua') {
            const list = document.getElementById('menu-list');
            list.innerHTML = "";
            const filtered = menuData.filter(i => f === 'semua' || i.cat === f);
            
            filtered.forEach(item => {
                const sel = cart.some(c => c.name === item.name);
                const isHabis = item.status === "Habis";
                const promo = item.promo;
                
                list.innerHTML += `
                <div class="menu-card" style="${sel?'border:2.5px solid #2D5A27; transform: scale(0.98)':''}">
                    <div class="img-box" onclick="zoomImg('${item.img}')">
                        ${promo ? `<div class="promo-tag">${promo}</div>` : ''}
                        <img src="${item.img}" onerror="this.src='https://via.placeholder.com/250?text=Menu'">
                        <div class="zoom-icon"><i class="fa fa-search-plus"></i> Zoom</div>
                    </div>
                    <h3>${item.name}</h3>
                    <div class="price-tag">${formatRupiah(item.price)}</div>
                    <div class="${isHabis ? 'lbl-habis' : 'lbl-tersedia'}">
                        ${isHabis ? '‚ùå Stok Habis' : '‚úÖ Tersedia'}
                    </div>
                    <button class="add-btn ${sel?'selected':''}" 
                            onclick="toggleCart('${item.name}', ${item.price})" 
                            ${isHabis ? 'disabled' : ''}>
                        ${isHabis ? 'Kosong' : (sel ? '‚úì Terpilih' : 'Pilih Menu')}
                    </button>
                </div>`;
            });
        }

        // KERANJANG BELANJA
        function toggleCart(n, p) {
            const i = cart.findIndex(c => c.name === n);
            if(i > -1) cart.splice(i,1); else cart.push({name: n, price: parseInt(p)});
            
            const total = cart.reduce((sum, item) => sum + item.price, 0);
            document.getElementById('cart-bar').style.display = cart.length ? 'flex' : 'none';
            document.getElementById('cart-count').innerText = cart.length + " Menu Terpilih";
            document.getElementById('cart-total').innerText = "Total: " + formatRupiah(total);
            
            // Re-render sesuai filter aktif
            const activeTab = document.querySelector('.tab-btn.active').innerText.toLowerCase();
            let cat = activeTab.includes('berat') ? 'makanan' : activeTab.includes('hits') ? 'jajanan' : activeTab.includes('manis') ? 'kue' : activeTab.includes('lain') ? 'lainnya' : 'semua';
            render(cat);
        }

        function filterMenu(c, b) {
            document.querySelectorAll('.tab-btn').forEach(x => x.classList.remove('active'));
            b.classList.add('active');
            render(c);
        }

        // KIRIM PESAN WHATSAPP + TIMESTAMP
        function checkoutWA() {
            const sekarang = new Date();
            const waktu = sekarang.toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' });
            const tanggal = sekarang.toLocaleDateString('id-ID', { day: 'numeric', month: 'short', year: 'numeric' });
            const total = cart.reduce((sum, item) => sum + item.price, 0);

            const pesan = `*STRUK PESANAN - Azzam Cemal-Cemil*\n` +
                          `--------------------------------------------\n` +
                          `Waktu: ${tanggal} | ${waktu} WIB\n` +
                          `--------------------------------------------\n\n` +
                          cart.map(m => `üëâ *${m.name}* (${formatRupiah(m.price)})`).join('\n') + 
                          `\n\n--------------------------------------------\n` +
                          `*TOTAL ESTIMASI: ${formatRupiah(total)}*\n` +
                          `--------------------------------------------\n` +
                          `_Mohon info ketersediaan stoknya ya Bunda Azzam._`;
            
            window.open(`https://wa.me/${noWA}?text=${encodeURIComponent(pesan)}`, '_blank');
        }

        // UPDATE WAKTU & STATUS BUKA/TUTUP
        function updateDateTime() {
            const now = new Date();
            document.getElementById('real-datetime').innerText = now.toLocaleDateString('id-ID', {weekday:'long', day:'numeric', month:'long', year:'numeric'}) + ' | ' + now.toLocaleTimeString('id-ID') + ' WIB';
        }

        function checkStatus() {
            const hr = new Date().getHours();
            const b = document.getElementById('shop-status-badge');
            const open = hr >= 8 && hr < 20;
            b.innerText = open ? "‚óè Toko Sedang Buka" : "‚óè Toko Sedang Tutup";
            b.className = open ? "status-badge status-open" : "status-badge status-closed";
        }

        setInterval(updateDateTime, 1000);
        updateDateTime(); checkStatus(); fetchMenu();
    </script>
</body>
</html>
